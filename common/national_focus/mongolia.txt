focus_tree = {
	id = MON_focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = MON
		}
	}
	default = no
	continuous_focus_position = {
		x = 0
		y = 1000
	}

	focus = {
		id = MON_aftermath_of_visit_to_moscow
		icon = GFX_goal_stalin
		x = 10
		y = 0
		cost = 5

		available_if_capitulated = yes

		available = {
		  	date < 1936.01.20
		}

		ai_will_do = {
			factor = 50		
		}


		completion_reward = {
			add_political_power = 20
			country_event = { id = mongol.10 }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = MON_hold_the_plenum_of_central_committee
		icon = GFX_goal_FRA_pcf_sfio_coalition
		x = -6
		y = 1
		cost = 10
		relative_position_id = MON_aftermath_of_visit_to_moscow
		mutually_exclusive = { 
			focus = MON_remove_soviet_agents
			focus = MON_reinforce_the_borders
		}
		prerequisite = { focus = MON_aftermath_of_visit_to_moscow }
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}


		completion_reward = {
			add_political_power = 50
			country_event = { id = mongol.11 }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = MON_reinforce_the_borders
		icon = gfx_postive_heroism
		x = 0
		y = 1
		cost = 10
		relative_position_id = MON_aftermath_of_visit_to_moscow
		mutually_exclusive = { 
			focus = MON_remove_soviet_agents
			focus = MON_hold_the_plenum_of_central_committee
		}
		prerequisite = { focus = MON_aftermath_of_visit_to_moscow }
		available_if_capitulated = yes

		ai_will_do = {
			factor = 0		
		}

		completion_reward = {
			add_ideas = MON_more_border_patrols
		}
	}

	focus = {
		id = MON_remove_soviet_agents
		icon = GFX_goal_anti_comintern_pact
		x = 6
		y = 1
		cost = 5
		relative_position_id = MON_aftermath_of_visit_to_moscow

		mutually_exclusive = { 
			focus = MON_hold_the_plenum_of_central_committee
			focus = MON_reinforce_the_borders
		}
		prerequisite = { focus = MON_aftermath_of_visit_to_moscow }
		available_if_capitulated = yes

		ai_will_do = {
			factor = 0		
		}

		completion_reward = {
			remove_ideas = MON_soviet_NKVD_agents
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
			SOV = {
				add_opinion_modifier = {
					target = ROOT
					modifier = medium_decrease
				}
			}
		}
	}

	focus = {
		id = MON_sign_protocol_of_mutual_assistance
		icon = GFX_generic_goal_communist_reforms
		x = 3
		y = 1
		cost = 2
		relative_position_id = MON_hold_the_plenum_of_central_committee
		prerequisite = { 
			focus = MON_hold_the_plenum_of_central_committee
			focus = MON_reinforce_the_borders
		}
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}
		completion_reward = {
			SOV = {
				country_event = { id = mongol.12 }
			}
		}
	}

	focus = {
		id = MON_appoint_choibalsan_as_interior_minister
		icon = GFX_focus_generic_military_mission
		x = -1
		y = 1
		cost = 10
		relative_position_id = MON_hold_the_plenum_of_central_committee
		mutually_exclusive = { 
			focus = MON_oppose_military_involvement
		}
		prerequisite = { 
			focus = MON_hold_the_plenum_of_central_committee
		}
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}
		completion_reward = {
			add_ideas = MON_powerful_choibalsan
		}
	}

	focus = {
		id = MON_invite_soviet_advisors
		icon = GFX_goal_molotov_ribbentrop_pact
		x = 3
		y = 1
		cost = 10
		relative_position_id = MON_appoint_choibalsan_as_interior_minister
		prerequisite = { focus = MON_appoint_choibalsan_as_interior_minister }
		prerequisite = { focus = MON_sign_protocol_of_mutual_assistance }
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}
		completion_reward = {
			swap_ideas = { remove_idea = MON_soviet_NKVD_agents add_idea = MON_soviet_NKVD_and_military }
			SOV = {
				every_unit_leader = {
		
					limit = {
						OR = {
							has_id = 9000  #was deployed actually
							has_id = 1421  #instead of Michail Tikhonov
							has_id = 1422  #instead of Ivan Nikitin					
						}
					}
					set_nationality = ROOT
				}				
			}
		}
	}

	focus = {
		id = MON_invite_frinovsky
		icon = GFX_goal_HON_nkvd_assistance
		x = 1
		y = 1
		cost = 10
		relative_position_id = MON_appoint_choibalsan_as_interior_minister
		prerequisite = { focus = MON_appoint_choibalsan_as_interior_minister }
		prerequisite = { focus = MON_sign_protocol_of_mutual_assistance }
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}
		completion_reward = {
			remove_ideas = MON_soviet_NKVD_agents
			if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = {
						has_intelligence_agency = yes
					}
				}
				create_intelligence_agency = yes				
			}			
			add_ideas = MON_troika_organized
		}
	}

	focus = {
		id = MON_the_revolutionary_centre
		icon = GFX_goal_TIB_monasteries_crushed
		x = -1
		y = 1
		cost = 10
		relative_position_id = MON_appoint_choibalsan_as_interior_minister
		prerequisite = { focus = MON_appoint_choibalsan_as_interior_minister }
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}
		completion_reward = {	
			add_political_power = 120	
			add_ideas = MON_buddhist_opposition
		}
	}

	focus = {
		id = MON_the_great_terror
		icon = GFX_goal_generic_armed_protest
		x = 1
		y = 1
		cost = 15
		relative_position_id = MON_the_revolutionary_centre
		prerequisite = { focus = MON_invite_frinovsky }
		prerequisite = { focus = MON_the_revolutionary_centre }
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}

		completion_reward = {
			custom_effect_tooltip = MON_great_terror_tt
			custom_effect_tooltip = MON_great_terror_tt_2
			#only debuffs#
			if = {
				limit = {
					has_country_flag = mon_purged_intellectuals_flag
				}
				add_timed_idea = {
					idea = Mon_intellectuals_purged
					days = 730
				}
			}

			if = {
				limit = {
					has_country_flag = mon_purged_party_flag
				}
				add_timed_idea = {
					idea = Mon_party_purged
					days = 730
				}
			}

			if = {
				limit = {
					has_country_flag = mon_purged_lamas_flag
				}
				remove_ideas = MON_buddhist_opposition
				add_timed_idea = {
					idea = Mon_lamas_purged
					days = 730
				}
			}

			# all three purged - get maximum buff #
			if = {
				limit = {
					AND = {
						has_country_flag = mon_purged_intellectuals_flag
						has_country_flag = mon_purged_party_flag
						has_country_flag = mon_purged_lamas_flag
					}
					
				}
				add_ideas = MON_consolidated_power_3
			}

			# only two purged - medium buff #
			if = {
				limit = {
					OR = {
						AND = {
							NOT = {
								has_country_flag = mon_purged_intellectuals_flag
							}
							has_country_flag = mon_purged_party_flag
							has_country_flag = mon_purged_lamas_flag
						}
						AND = {
							NOT = {
								has_country_flag = mon_purged_party_flag
							}
							has_country_flag = mon_purged_intellectuals_flag
							has_country_flag = mon_purged_lamas_flag
						}
						AND = {
							NOT = {
								has_country_flag = mon_purged_lamas_flag
							}
							has_country_flag = mon_purged_intellectuals_flag
							has_country_flag = mon_purged_party_flag
						}
					}
				}
				add_ideas = MON_consolidated_power_2
			}

			# only one purged - small buff #
			if = {
				limit = {
					OR = {
						AND = {
							NOT = { has_country_flag = mon_purged_intellectuals_flag }
							NOT = { has_country_flag = mon_purged_party_flag }
							has_country_flag = mon_purged_lamas_flag
						}
						AND = {
							NOT = { has_country_flag = mon_purged_intellectuals_flag }
							NOT = { has_country_flag = mon_purged_lamas_flag }
							has_country_flag = mon_purged_party_flag
						}
						AND = {
							NOT = { has_country_flag = mon_purged_party_flag }
							NOT = { has_country_flag = mon_purged_lamas_flag }
							has_country_flag = mon_purged_intellectuals_flag
						}
					}
				}
				add_ideas = MON_consolidated_power_1
			}

			# no purges - small buff soviets disappointed in choibalsan #
			if = {
				limit = {
					AND = {
						NOT = { has_country_flag = mon_purged_intellectuals_flag }
						NOT = { has_country_flag = mon_purged_party_flag }
						NOT = { has_country_flag = mon_purged_lamas_flag}
						}
					}
				remove_ideas = MON_powerful_choibalsan
				SOV = {
					add_opinion_modifier = {
						target = ROOT
						modifier = medium_decrease
					}
				}
			}
		}
	}


	focus = {
		id = MON_oppose_military_involvement
		icon = GFX_goal_arrests
		x = -3
		y = 1
		cost = 15
		relative_position_id = MON_hold_the_plenum_of_central_committee
		mutually_exclusive = { 
			focus = MON_appoint_choibalsan_as_interior_minister
		}
		prerequisite = { 
			focus = MON_hold_the_plenum_of_central_committee
		}
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}
		completion_reward = {
			custom_effect_tooltip = MON_incoming_militarist_uprising_tt
			add_timed_idea = {
				idea = MON_incoming_militarist_uprising
    			days = 365
			}
		}
	}


	focus = {
		id = MON_proudly_alone
		icon = gfx_fifth_column
		x = 0
		y = 2
		cost = 5
		relative_position_id = MON_reinforce_the_borders
		prerequisite = { focus = MON_reinforce_the_borders focus = MON_sign_protocol_of_mutual_assistance }
		available_if_capitulated = yes

		available = {
			AND = {
				has_government = communism
				has_country_leader = {
					name = "Peljidiin Genden"
					ruling_only = yes
				}
			}		
		}
		ai_will_do = {
			factor = 0		
		}

		completion_reward = {
			SOV = {
				remove_from_faction = MON
			}
			if = {
                limit = { NOT = { has_idea = neutrality_idea } }
                add_ideas = neutrality_idea
            }
			MON = {
				set_rule = {
				    can_join_factions = no
				}
			}
		}
	}
####### INDUSTRY #########

	focus = {
		id = MON_transfer_the_funds_of_mongolbank
		icon = GFX_focus_mex_privatisation
		x = -10
		y = 0
		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}
		completion_reward = {
			add_ideas = Mongolbank_very_high_funds
		}
	}

	focus = {
		id = MON_expand_elementary_schools
		icon = GFX_goal_research_silver_cooperation
		x = -16
		y = 0
		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 50		
		}
		completion_reward = {
			add_ideas = Mon_elementary_schools
		}
	}

	focus = {
		id = MON_student_exchange_programs
		icon = GFX_focus_research
		x = -4
		y = 1
		cost = 10
		relative_position_id = MON_transfer_the_funds_of_mongolbank
		prerequisite = { focus = MON_transfer_the_funds_of_mongolbank } 
		prerequisite = { focus = MON_expand_elementary_schools }

		available_if_capitulated = yes
		available = {
			is_in_faction = yes
		}
		ai_will_do = {
			factor = 50		
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = MON_ill_educated_population
				add_idea = MON_population_learning
			}
			add_research_slot = 1
		}
	}
}
